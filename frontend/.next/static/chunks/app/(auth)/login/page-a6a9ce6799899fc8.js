(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72],{283:(e,s,t)=>{"use strict";t.d(s,{A:()=>c,AuthProvider:()=>i});var r=t(5155),a=t(2115),l=t(5695);let n=(0,a.createContext)(void 0),c=()=>{let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},i=e=>{let{children:s}=e,[t,c]=(0,a.useState)(null),[i,o]=(0,a.useState)(!0),d=(0,l.useRouter)(),h=async()=>{try{let e=await fetch("".concat("http://localhost:5001","/auth/me"),{credentials:"include"});if(e.ok){let s=await e.json();c(s.user)}else c(null)}catch(e){console.error("Auth check failed:",e),c(null)}finally{o(!1)}},u=async(e,s,t)=>{let r=await fetch("".concat("http://localhost:5001","/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,password:s,rememberMe:t})});if(!r.ok)throw Error((await r.json()).message||"Login failed");c((await r.json()).user),d.push("/dashboard")},x=async()=>{try{await fetch("".concat("http://localhost:5001","/auth/logout"),{method:"POST",credentials:"include"})}catch(e){console.error("Logout failed:",e)}finally{c(null),d.push("/login")}};return(0,a.useEffect)(()=>{h()},[]),(0,r.jsx)(n.Provider,{value:{user:t,loading:i,login:u,logout:x,checkAuth:h},children:s})}},646:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1007:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2919:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},7930:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},8414:(e,s,t)=>{Promise.resolve().then(t.bind(t,9146))},8749:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9946).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},9146:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var r=t(5155),a=t(2115),l=t(6874),n=t.n(l),c=t(283),i=t(7930),o=t(646),d=t(1007),h=t(2919),u=t(8749),x=t(2657),m=t(5695);function g(){let[e,s]=(0,a.useState)({username:"",password:"",rememberMe:!1}),[t,l]=(0,a.useState)(!1),[g,f]=(0,a.useState)(""),[y,p]=(0,a.useState)(!1),[b,j]=(0,a.useState)(!1),{login:v}=(0,c.A)(),w=(0,m.useSearchParams)();(0,a.useEffect)(()=>{"registration_success"===w.get("message")&&(j(!0),setTimeout(()=>j(!1),5e3))},[w]);let N=async s=>{s.preventDefault(),l(!0),f("");try{await v(e.username,e.password,e.rememberMe)}catch(e){f(e.message||"เกิดข้อผิดพลาดในการเข้าสู่ระบบ")}finally{l(!1)}},k=e=>{let{name:t,value:r,type:a,checked:l}=e.target;s(e=>({...e,[t]:"checkbox"===a?l:r}))};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 via-white to-indigo-50 p-4 sm:p-6",children:(0,r.jsxs)("div",{className:"w-full max-w-md",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"flex justify-center mb-4",children:(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-400 to-orange-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,r.jsx)(i.A,{className:"w-8 h-8 text-white"})})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"เข้าสู่ระบบ"}),(0,r.jsx)("p",{className:"text-gray-600",children:"เข้าสู่ระบบจัดการคลังสินค้า อู่.น้อง โตต้า"})]}),b&&(0,r.jsx)("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-xl p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-5 h-5 bg-green-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(o.A,{className:"w-3 h-3 text-green-600"})}),(0,r.jsx)("p",{className:"text-sm text-green-700",children:"สมัครสมาชิกสำเร็จ! กรุณาเข้าสู่ระบบด้วยข้อมูลที่สมัครไว้"})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 p-6 sm:p-8",children:[(0,r.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[g&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-5 h-5 bg-red-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-3 h-3 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,r.jsx)("p",{className:"text-sm text-red-700",children:g})]})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"ชื่อผู้ใช้"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(d.A,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{type:"text",name:"username",value:e.username,onChange:k,className:"w-full pl-10 pr-4 py-3 border border-gray-300 text-gray-700 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors",placeholder:"กรอกชื่อผู้ใช้",required:!0})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"รหัสผ่าน"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(h.A,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{type:y?"text":"password",name:"password",value:e.password,onChange:k,className:"w-full pl-10 pr-12 py-3 border border-gray-300 text-gray-700 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors",placeholder:"กรอกรหัสผ่าน",required:!0}),(0,r.jsx)("button",{type:"button",onClick:()=>p(!y),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:y?(0,r.jsx)(u.A,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):(0,r.jsx)(x.A,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{id:"rememberMe",name:"rememberMe",type:"checkbox",checked:e.rememberMe,onChange:k,className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:"rememberMe",className:"ml-2 block text-sm text-gray-700",children:"จดจำฉันไว้ 30 วัน"})]}),(0,r.jsx)("button",{type:"submit",disabled:t,className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-3 px-4 rounded-xl font-medium hover:from-orange-600 hover:to-orange-700 focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:t?(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"กำลังเข้าสู่ระบบ..."]}):"เข้าสู่ระบบ"})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["ยังไม่มีบัญชี?"," ",(0,r.jsx)(n(),{href:"/signup",className:"font-medium text-orange-600 hover:text-orange-700 underline-offset-2 hover:underline transition-colors",children:"สมัครสมาชิกใหม่"})]})})]}),(0,r.jsx)("div",{className:"text-center mt-8",children:(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["\xa9 ",new Date().getFullYear()," AU.NONGTOTA. All rights reserved."]})})]})})}function f(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)(g,{})})}}},e=>{e.O(0,[484,441,964,358],()=>e(e.s=8414)),_N_E=e.O()}]);