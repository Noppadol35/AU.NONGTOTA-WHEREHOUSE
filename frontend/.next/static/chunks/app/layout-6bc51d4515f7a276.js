(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{283:(e,t,a)=>{"use strict";a.d(t,{A:()=>u,AuthProvider:()=>l});var r=a(5155),o=a(2115),s=a(5695);let n=(0,o.createContext)(void 0),u=()=>{let e=(0,o.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},l=e=>{let{children:t}=e,[a,u]=(0,o.useState)(null),[l,i]=(0,o.useState)(!0),c=(0,s.useRouter)(),h=async()=>{try{let e=await fetch("".concat("http://localhost:5001","/auth/me"),{credentials:"include"});if(e.ok){let t=await e.json();u(t.user)}else u(null)}catch(e){console.error("Auth check failed:",e),u(null)}finally{i(!1)}},d=async(e,t,a)=>{let r=await fetch("".concat("http://localhost:5001","/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,password:t,rememberMe:a})});if(!r.ok)throw Error((await r.json()).message||"Login failed");u((await r.json()).user),c.push("/dashboard")},f=async()=>{try{await fetch("".concat("http://localhost:5001","/auth/logout"),{method:"POST",credentials:"include"})}catch(e){console.error("Logout failed:",e)}finally{u(null),c.push("/login")}};return(0,o.useEffect)(()=>{h()},[]),(0,r.jsx)(n.Provider,{value:{user:a,loading:l,login:d,logout:f,checkAuth:h},children:t})}},347:()=>{},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},6436:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,347,23)),Promise.resolve().then(a.bind(a,283))}},e=>{e.O(0,[690,441,964,358],()=>e(e.s=6436)),_N_E=e.O()}]);